{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const textInput = document.getElementById('textInput');\nconst submitButton = document.getElementById('submitButton');\nconst textDisplay = document.getElementById('textDisplay');\n\nlet isSelecting = false;\nlet selectionBox = null;\nlet startX = 0;\nlet startY = 0;\n\nsubmitButton.addEventListener('click', () => {\n  const text = textInput.value.trim();\n  textDisplay.innerHTML = '';\n\n  text.split('').forEach(char => {\n    const span = createCharacterSpan(char);\n    textDisplay.appendChild(span);\n  });\n});\n\nfunction createCharacterSpan(char) {\n  const span = document.createElement('span');\n  span.textContent = char;\n  span.setAttribute('draggable', true);\n  span.classList.add('char');\n\n  span.addEventListener('click', handleHighlight);\n  span.addEventListener('dragstart', handleDragStart);\n  span.addEventListener('dragover', e => e.preventDefault());\n  span.addEventListener('drop', handleDrop);\n\n  return span;\n}\n\nfunction handleHighlight(e) {\n  if (e.ctrlKey) {\n    e.target.classList.toggle('highlight');\n  }\n}\n\nfunction handleDragStart(e) {\n  const selectedChars = getSelectedCharacters(e.target);\n  const indices = selectedChars.map(char =>\n    [...textDisplay.children].indexOf(char)\n  );\n  e.dataTransfer.setData('text/plain', JSON.stringify(indices));\n}\n\nfunction getSelectedCharacters(span) {\n  const selected = [...document.querySelectorAll('.highlight')];\n  return span.classList.contains('highlight') ? selected : [span];\n}\n\nfunction handleDrop(e) {\n  e.preventDefault();\n\n  const droppedIndices = JSON.parse(e.dataTransfer.getData('text/plain'));\n  const targetIndex = [...textDisplay.children].indexOf(e.target);\n\n  if (targetIndex === -1) return;\n\n  const spans = [...textDisplay.children];\n  const draggedChars = droppedIndices.map(i => spans[i].textContent);\n\n  droppedIndices.sort((a, b) => b - a).forEach(i => spans[i].remove());\n\n  draggedChars.forEach((char, i) => {\n    const newSpan = createCharacterSpan(char);\n    if (i === 0) {\n      e.target.insertAdjacentElement('beforebegin', newSpan);\n    } else {\n      textDisplay.insertBefore(newSpan, e.target);\n    }\n  });\n\n  if (droppedIndices[0] < targetIndex) {\n    const targetSpan = createCharacterSpan(e.target.textContent);\n    e.target.remove();\n    textDisplay.insertBefore(\n      targetSpan,\n      textDisplay.children[droppedIndices[0]]\n    );\n  }\n}\n\ntextDisplay.addEventListener('mousedown', e => {\n  if (e.target === textDisplay) {\n    isSelecting = true;\n    startX = e.clientX;\n    startY = e.clientY;\n\n    selectionBox = createSelectionBox();\n    document.body.appendChild(selectionBox);\n  }\n});\n\nfunction createSelectionBox() {\n  const box = document.createElement('div');\n  box.style.position = 'absolute';\n  box.style.border = '1px dashed #000';\n  box.style.backgroundColor = 'rgba(0, 0, 255, 0.2)';\n  box.style.left = `${startX}px`;\n  box.style.top = `${startY}px`;\n  return box;\n}\n\ndocument.addEventListener('mousemove', e => {\n  if (isSelecting) {\n    const currentX = e.clientX;\n    const currentY = e.clientY;\n\n    selectionBox.style.left = `${Math.min(startX, currentX)}px`;\n    selectionBox.style.top = `${Math.min(startY, currentY)}px`;\n    selectionBox.style.width = `${Math.abs(currentX - startX)}px`;\n    selectionBox.style.height = `${Math.abs(currentY - startY)}px`;\n  }\n});\n\ndocument.addEventListener('mouseup', e => {\n  if (isSelecting) {\n    isSelecting = false;\n\n    const rect = selectionBox.getBoundingClientRect();\n\n    document.querySelectorAll('.char').forEach(span => {\n      const spanRect = span.getBoundingClientRect();\n      if (isIntersecting(rect, spanRect)) {\n        span.classList.add('highlight');\n      }\n    });\n\n    selectionBox.remove();\n    selectionBox = null;\n  }\n});\n\nfunction isIntersecting(rect1, rect2) {\n  return (\n    rect1.left < rect2.right &&\n    rect1.right > rect2.left &&\n    rect1.top < rect2.bottom &&\n    rect1.bottom > rect2.top\n  );\n}\n"],"names":["textInput","submitButton","textDisplay","isSelecting","selectionBox","startX","startY","text","char","span","createCharacterSpan","handleHighlight","handleDragStart","e","handleDrop","indices","getSelectedCharacters","selected","droppedIndices","targetIndex","spans","draggedChars","i","a","b","newSpan","targetSpan","createSelectionBox","box","currentX","currentY","rect","spanRect","isIntersecting","rect1","rect2"],"mappings":"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"}